**ДОКУМЕНТАЦИЯ К УПРАВЛЕНИЮ ДРОНОМ**

Этот код представляет собой ROS-ноду для управления дроном, выполняющую взлет, движение по заданной траектории и посадку.
Используются топики /cmd_vel (управление движением), /drone/takeoff (взлет) и /drone/land (посадка).
**1. Общая структура**

    Класс StartRace содержит методы для:
    
        Публикации команд в ROS-топики (publish_once_in_cmd_vel)
    
        Остановки дрона (stop_drone)
    
        Поворота (turn_drone)
    
        Движения вперед (move_forward_drone)
    
        Основной логики (run)

**2. Алгоритмы и их описание**
2.1. Публикация команд (publish_once_in_cmd_vel)

    Назначение:
    Обеспечивает надежную отправку команды в топик /cmd_vel, даже если подписчик еще не активирован.
    
    Алгоритм:
    
        Проверяет количество активных подключений к топику.
    
        Если есть хотя бы одно подключение, публикует сообщение.
    
        Если подключений нет, ждет 0.1 сек (частота self.rate = 10 Гц) и повторяет проверку.
    
    Используемые ROS-сообщения:
    Twist (линейная и угловая скорость).
2.2. Остановка дрона (stop_drone)

    Назначение:
    Полностью останавливает дрон, обнуляя линейную (x) и угловую (z) скорости.
    
    Алгоритм:
    
        Устанавливает linear.x = 0 и angular.z = 0.
    
        Отправляет команду через publish_once_in_cmd_vel.

2.3. Поворот дрона (turn_drone)

    Назначение:
    Поворачивает дрон на заданный угол (в градусах).
    
    Алгоритм:
    
        Обнуляет линейные скорости (x, y, z).
    
        Задает угловую скорость angular.z = degrees / 105 (эмпирический коэффициент).
    
        Отправляет команду.
    
    Примечание:
    Коэффициент 105 подобран экспериментально и может требовать калибровки под конкретный дрон.
2.4. Движение вперед (move_forward_drone)

    Назначение:
    Перемещает дрон по вектору (x, y, z) с нулевым поворотом.
    
    Алгоритм:
    
        Устанавливает линейные скорости linear.{x, y, z}.
    
        Обнуляет угловую скорость (angular.z = 0).
    
        Отправляет команду.

2.5. Основной алгоритм (run)

    Назначение:
    Выполняет полетную миссию:
    
        Взлет.
    
        Движение по траектории.
    
        Посадка.
    
2.5.1. Взлет

    Публикует сообщение Empty() в /drone/takeoff трижды с интервалом 1 сек (для надежности).

2.5.2. Траектория движения

    Дрон выполняет последовательность:
    
        Движение вперед (2.3, -0.65, 0.44) → пауза 2 сек.
    
        Движение вперед (1.7, 0.33, -0.53) → пауза 2 сек.
    
        Поворот на -90° → пауза 1.8 сек.
    
        Движение вперед (3, 0.22, 0.45) → пауза 2 сек.
    
        Движение вперед (1.3, 0, -0.5) → пауза 2 сек.
    
        Поворот на -120° → пауза 1.8 сек.
    
        Движение вперед (3, 0.2, 0.5) → пауза 2 сек.
    
        Движение вверх (0.7, 0.1, 1) → пауза 2 сек.
    
        Движение вниз (0, -0.05, -1) → пауза 2 сек.
    
        Движение вперед (1.4, 0, 0) → пауза 2 сек.

2.5.3. Посадка

    Публикует сообщение Empty() в /drone/land трижды с интервалом 1 сек.
**3. Запуск ноды**
    python
    
    if __name__ == '__main__':
      rospy.init_node('move_square')  # Инициализация ноды
      drone_attempt = StartRace()     # Создание экземпляра класса
      try:
          drone_attempt.run()        # Запуск полетной миссии
      except rospy.ROSInterruptException:
          pass
    
    Название ноды: move_square
    Зависимости:
    
        rospy
    
        std_msgs.msg.Empty
    
        geometry_msgs.msg.Twist
**Заключение**

    Данный код реализует автономное движение дрона по заданной траектории с использованием ROS.
    Основные функции: взлет, повороты, движение вперед/назад/вверх/вниз, посадка.
